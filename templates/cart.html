<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–æ—à–∏–∫ - RepairHub</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
</head>
<body class="bg-light">
    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
    <nav class="navbar navbar-white bg-white border-bottom">
        <div class="container">
            <a class="navbar-brand" href="/">RepairHub</a>
            <div class="ms-auto">
                <a href="/products" class="btn btn-link">‚Üê –î–æ –º–∞–≥–∞–∑–∏–Ω—É</a>
                <a href="/" class="btn btn-link">–ì–æ–ª–æ–≤–Ω–∞</a>
            </div>
        </div>
    </nav>

    <div class="container my-4">
        <h2>üõí –í–∞—à –∫–æ—à–∏–∫</h2>
        
        {% if cart_items and cart_items|length > 0 %}
        <div class="card mt-3">
            <div class="card-body">
                <table class="table">
                    <thead>
                        <tr>
                            <th>–¢–æ–≤–∞—Ä</th>
                            <th>–¶—ñ–Ω–∞</th>
                            <th>–ö—ñ–ª—å–∫—ñ—Å—Ç—å</th>
                            <th>–°—É–º–∞</th>
                            <th>–î—ñ—ó</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for item in cart_items %}
                        <tr>
                            <td>
                                {% if item.image_url %}
                                <img src="{{ item.image_url }}" alt="{{ item.name }}" width="50" height="50" class="me-2">
                                {% endif %}
                                {{ item.name }}
                            </td>
                            <td>{{ "%.2f"|format(item.price) }} –≥—Ä–Ω</td>
                            <td>{{ item.quantity }}</td>
                            <td>{{ "%.2f"|format(item.price * item.quantity) }} –≥—Ä–Ω</td>
                            <td>
                                <form method="post" action="/cart/remove" class="d-inline">
                                    <input type="hidden" name="product_id" value="{{ item.product_id }}">
                                    <button type="submit" class="btn btn-danger btn-sm">
                                        <i class="bi bi-trash"></i>
                                    </button>
                                </form>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
                
                <div class="text-end mt-4">
                    <h4>–ó–∞–≥–∞–ª—å–Ω–∞ —Å—É–º–∞: {{ "%.2f"|format(total) }} –≥—Ä–Ω</h4>
                    
                    <div class="d-flex gap-2 justify-content-end mt-3">
                        <form method="post" action="/cart/clear" class="d-inline">
                            <button type="submit" class="btn btn-outline-danger">
                                <i class="bi bi-trash"></i> –û—á–∏—Å—Ç–∏—Ç–∏ –∫–æ—à–∏–∫
                            </button>
                        </form>
                        
                        <!-- –ò–°–ü–†–ê–í–õ–ï–ù–ù–ê–Ø –ö–ù–û–ü–ö–ê –û–§–û–†–ú–õ–ï–ù–ò–Ø –ó–ê–ö–ê–ó–ê -->
                        {% if is_authenticated %}
                        <a href="/checkout" class="btn btn-success btn-lg">
                            <i class="bi bi-bag-check"></i> –û—Ñ–æ—Ä–º–∏—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
                        </a>
                        {% else %}
                        <a href="/auth/login" class="btn btn-success btn-lg">
                            <i class="bi bi-bag-check"></i> –£–≤—ñ–π—Ç–∏ –¥–ª—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–Ω—è
                        </a>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
        {% else %}
        <div class="alert alert-info mt-4">
            <div class="d-flex align-items-center">
                <div class="me-3">
                    <i class="bi bi-cart-x fs-1"></i>
                </div>
                <div>
                    <h4 class="alert-heading">–ö–æ—à–∏–∫ –ø–æ—Ä–æ–∂–Ω—ñ–π</h4>
                    <p>–î–æ–¥–∞–π—Ç–µ —Ç–æ–≤–∞—Ä–∏ –∑ <a href="/products" class="alert-link">–º–∞–≥–∞–∑–∏–Ω—É</a>.</p>
                </div>
            </div>
        </div>
        {% endif %}
    </div>

    <footer class="bg-dark text-white py-4 mt-5">
        <div class="container text-center">
            <div class="text-muted small">
                ¬© 2024 RepairHub ‚Ä¢ –ö–æ—à–∏–∫ –ø–æ–∫—É–ø–æ–∫
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>